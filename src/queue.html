<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Queues</title>
</head>
<body>

<script>
    /*function Queue() {
        this._oldestIndex = 1;
        this._newestIndex = 1;
        this._storage = {};
    }

    Queue.prototype.size = function () {
        return this._newestIndex - this._oldestIndex;
    };

    Queue.prototype.enqueue = function (data) {
        this._storage[this._newestIndex] = data;
        this._newestIndex ++;
    };

    Queue.prototype.dequeue = function () {
        var oldestIndex = this._oldestIndex,
            newestIndex = this._newestIndex,
            deleteData;

        if (oldestIndex !== newestIndex) {
            deleteData = this._storage[oldestIndex];
            delete this._storage[oldestIndex];
            this._oldestIndex ++;

            return deleteData;
        }

    };
    myQueue = new Queue();

    myQueue.enqueue("Bob");
    myQueue.enqueue("Thomas");
    myQueue.enqueue("Harold");
    myQueue.enqueue("Richard");

    console.log(myQueue.dequeue());
    console.log(myQueue.size());*/

    var allCapsPromise = allCaps('my string');
    var allCapsPromise1 = allCaps('my string');
    var allCapsPromise2 = allCaps('my string');
    var allCapsPromise3 = allCaps('my string');
    var allCapsPromise4 = allCaps('my string');

    var success = function (allCapsString) {
        console.log(allCapsString);
    };
    var failure = function (error) {
        console.log(error.message);
    };
    var errorHandler = function () {

    };

    allCapsPromise.then(success, failure);

    allCapsPromise.catch(errorHandler);

    function allCaps(input) {
        return new Promise(function (resolve,reject) {
            if (input.length == 0) {
                var error = {
                    message:"Invalid Input"
                };
                reject(error);
            }
            var upperCaseInput = input.toUpperCase();
            resolve(upperCaseInput);
        })
    }

    var p1 = new Promise(
        function (resolve,reject) {
            log.insertAdjacentHTML('beforeend', thisPromiseCount + ') promise started (<small>async code started</small>)<br/>');
            window.setTimeout(
                function () {
                    resolve(thisPromiseCount);
                }, Math.Random() * 2000 + 1000);
        }
    )

</script>
</body>
</html>
